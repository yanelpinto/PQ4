<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<title>PQ4</title>
</head>
	 <body>
		 
<script>
//Javascript Calculator Functions
//Initial Variables
var userInput;
var lastval;
var dispval;
var clearText;
var evalText;
var dispText;
var skip;
var C;
userInput = "";
lastval = "";
dispval = "";
evalText = "0+";
clearText = "C";
dispText = "0";
skip = 1;
flag = 1;

function myCalc(buttonValue)
{
//Handle multiple operator entries
//If condition #1
if ((lastval == '+' || lastval == '-' || lastval == '*' || lastval == '/') && (buttonValue == '+' || buttonValue == '-' || buttonValue == '*' || buttonValue == '/'))
{
evalText = evalText.substring(0,evalText.length - 1) + buttonValue;
//userInput = userInput.substring(0,userInput.length -1);
skip = 0;
if (userInput = "")
{
userInput = "0";
}
//alert(evalText);***
}

if (skip == 1) {
//If condition #2
//Operator and last NOT clear
if ((buttonValue == '+' || buttonValue == '-' || buttonValue == '*' || buttonValue == '/') && (lastval != 'clear'))
{
//Evaluate previous data to conserve order of operations.
	if (lastval != "=")
	{
		dispText = eval(evalText + eval(userInput));
		evalText = dispText + buttonValue;
		userInput = ""
		calculator.display.value = dispText;
	}
	else
	{
		evalText = dispText + buttonValue
		userInput = ""
		calculator.display.value = dispText;	
	}
}
//Operator and last IS clear
else if ((buttonValue == '+' || buttonValue == '-' || buttonValue == '*' || buttonValue == '/') && (lastval == 'clear'))
{
userInput = "0";
calculator.display.value = dispText;
}
	
//Clear Handling
else if (buttonValue == 'clear' && calculator.clear.value == "C")
{
	if ((lastval != '+' || lastval != '-' || lastval != '*' || lastval != '/'))
	{
		calculator.clear.value = "C";
		userInput = "0";
		calculator.display.value = "0";
	}
	else
	{
		calculator.clear.value = "C";
		calculator.display.value = dispText;
		userInput = "0";
	}
}
else if (buttonValue == 'clear' && calculator.clear.value != "C")
{
		userInput = "0"
		lastval = "";
		dispval = "";
		evalText = "0+";
		dispText = "0";
		calculator.display.value = evalText.substring(0,evalText.length-1);
}
	
//Handling Zero value condition
else if (userInput == '0' && buttonValue != '.')
{
userInput = buttonValue;
calculator.clear.value = "C";
calculator.display.value = userInput;
}
	
//Handling Period
else if (buttonValue == '.')
{
	if (userInput.search('.') == -1 || userInput.search('.') == 0)
	{
		if (userInput == "")
		{
		userInput = "0";
		}
		userInput += buttonValue;
		calculator.display.value = userInput;
		calculator.clear.value = "C";
	}
	else
	{
	//Do nothing if period already exists in string.
	}
}
	
//Handling Equals
else if (buttonValue == "=" && lastval != "=")
{
dispText = eval(evalText + userInput);
calculator.display.value = dispText;
}
else if (buttonValue == "=" && lastval == "=")
{
dispText = eval(dispText + evalText.substr(-1) + userInput);
calculator.display.value = dispText;
}
//Else (String concatenation)
else
{
calculator.clear.value = "C";
userInput += buttonValue;
calculator.display.value = userInput;
}
	
//Last Conditions
}
skip = 1;
lastval = buttonValue;
alert(userInput)
}
</script>
		 
 
		 <h1> Calculator</h1>
      <form name="calculator">
         <table>
            <tr>
               <td colspan="4">
					<input type="text" name="display" value="0" id="display" disabled>
               </td>
            </tr>
            <tr>
               <td><input type="button" name="one" value="1" onclick="myCalc('1')"></td>
               <td><input type="button" name="two" value="2" onclick="myCalc('2')"></td>
               <td><input type="button" name="three" value="3" onclick="myCalc('3')"></td>
               <td><input type="button" class="operator" name="plus" value="+" onclick="myCalc('+')"></td>
            </tr>
            <tr>
               <td><input type="button" name="four" value="4" onclick="myCalc('4')"></td>
               <td><input type="button" name="five" value="5" onclick="myCalc('5')"></td>
               <td><input type="button" name="six" value="6" onclick="myCalc('6')"></td>
               <td><input type="button" class="operator" name="minus" value="-" onclick="myCalc('-')"></td>
            </tr>
            <tr>
               <td><input type="button" name="seven" value="7" onclick="myCalc('7')"></td>
               <td><input type="button" name="eight" value="8" onclick="myCalc('8')"></td>
               <td><input type="button" name="nine" value="9" onclick="myCalc('9')"></td>
               <td><input type="button" class="operator" name="times" value="x" onclick="myCalc('*')"></td>
            </tr>
            <tr>
               <td><input type="button" id="clear" name="clear" value="C" onclick="myCalc('clear')"></td>
				<td><input type="button" name="zero" value="0" onclick="myCalc(0)"></td>
				<td><input type="button" class="decimal" value="." onclick="myCalc('.')"></td>
               <td><input type="button" class="operator" name="div" value="/" onclick="myCalc('/')"></td>
				<td><input type="button" name="equal" value="=" onclick="myCalc('=')"></td>
            </tr>
         </table>
      </form>
</body>
</html>
